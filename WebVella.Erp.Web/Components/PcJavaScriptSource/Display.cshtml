@addTagHelper *, WebVella.Erp.Plugins.Core
@addTagHelper *, WebVella.Erp.Web
@addTagHelper *, WebVella.TagHelpers
@using WebVella.Erp
@using WebVella.Erp.Web.Services
@using WebVella.Erp.Web.Utils;
@using WebVella.Erp.Web.Components;
@using WebVella.Erp.Web.Models;
@using WebVella.Erp.Web;
@{
    var options = (PcJavaScriptSource.PcJavaScriptSourceOptions)ViewBag.Options;

    var source = options.Source;

    var cacheKey = new RenderService().GetCacheKey();

    if (!string.IsNullOrWhiteSpace(cacheKey) && !string.IsNullOrWhiteSpace(source) && source.EndsWith(".js", StringComparison.OrdinalIgnoreCase))
        source = $"{source[0..source.LastIndexOf('.')]}-{cacheKey}.js";
}
<script src="@source" type="text/javascript"></script>